# Component Definition: Total Liabilities
# All obligations of the entity

component_id: total_liabilities
display_name: "Total Liabilities"
description: "Total of all liabilities, current and noncurrent"

category: balance_sheet
subcategory: liabilities

characteristics:
  balance_type: credit
  period_type: instant
  is_monetary: true
  is_abstract: false
  data_type: monetary

matching_rules:
  label_rules:
    # Highest priority: Exact matches
    - patterns:
        - "Liabilities"
        - "Total Liabilities"
        - "Liabilities, Total"
      match_type: exact
      case_sensitive: false
      weight: 20

    # High weight for contains patterns
    - patterns:
        - "total liabilities"
        - "liabilities"
        - "total creditors"
      match_type: contains
      case_sensitive: false
      weight: 12

  local_name_rules:
    - patterns:
        - "Liabilities"
      match_type: exact
      weight: 15

    - patterns:
        - "TotalLiabilities"
        - "LiabilitiesTotal"
      match_type: contains
      weight: 10

  hierarchy_rules:
    - rule_type: parent_matches
      pattern: "*LiabilitiesAndStockholdersEquity*"
      weight: 8

    - rule_type: has_siblings
      pattern: "*Equity*"
      weight: 6

  calculation_rules:
    - rule_type: has_children
      patterns:
        - "*Current*"
        - "*Noncurrent*"
        - "*LongTerm*"
      min_matches: 1
      weight: 8

    - rule_type: contributes_to
      pattern: "*LiabilitiesAndStockholdersEquity*"
      weight: 6

  definition_rules:
    - keywords:
        - "obligation"
        - "liability"
        - "debt"
        - "owed"
      all_required: false
      weight: 4

scoring:
  min_score: 18
  confidence_levels:
    high: 32
    medium: 25
    low: 18
  tiebreaker: highest_in_hierarchy
  reject_if:
    - condition: "Is abstract concept"
      pattern: "abstract=true"
    - condition: "Is combined liabilities and equity (L+SE total)"
      pattern: "name~liabilitiesandstockholdersequity"
    - condition: "Is combined liabilities and equity (L&SE)"
      pattern: "name~liabilitiesandequity"
    - condition: "Is net assets (equity, not liabilities)"
      pattern: "name~netassets"
    - condition: "Is insurance contracts"
      pattern: "name~insurancecontracts"
    - condition: "Is net current assets/liabilities (working capital)"
      pattern: "name~currentassetsliabilities"
    - condition: "Is current liabilities only"
      pattern: "name~liabilitiescurrent"
    - condition: "Is noncurrent liabilities only"
      pattern: "name~liabilitiesnoncurrent"
    - condition: "Is noncurrent liabilities only (IFRS naming)"
      pattern: "name~noncurrentliabilities"

    # Reject specific liability types (children, not the total)
    - condition: "Is accounts payable"
      pattern: "name~accountspayable"
    - condition: "Is accrued item"
      pattern: "name~accrued"
    - condition: "Is deferred item (child, not total)"
      pattern: "name~deferred"
    - condition: "Is notes payable"
      pattern: "name~notespayable"
    - condition: "Is pension/benefit liability"
      pattern: "name~pension"
    - condition: "Is defined benefit plan item"
      pattern: "name~benefitplan"
    - condition: "Is derivative liability"
      pattern: "name~derivative"
    - condition: "Is operating lease liability"
      pattern: "name~operatinglease"
    - condition: "Is finance lease liability"
      pattern: "name~financelease"
    - condition: "Is lease liability (generic)"
      pattern: "name~leaseliabilities"

    # Reject cash flow adjustment concepts
    - condition: "Is cash flow adjustment"
      pattern: "name~adjustmentsfor"
    - condition: "Is increase/decrease item"
      pattern: "name~increasedecrease"

    # Reject disclosure items
    - condition: "Is text block"
      pattern: "name~textblock"
    - condition: "Is schedule"
      pattern: "name~schedule"

composition:
  is_composite: false
  # Fallback: accounting identity L = A - E (universal)
  # Used when no direct "Liabilities" concept exists in filing
  components:
    - total_assets
    - total_equity
  formula: "total_assets - total_equity"

validation:
  expected_sign: positive
  required_for:
    - debt_to_equity
    - debt_ratio
    - leverage_ratio
